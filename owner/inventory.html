<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white">

<!-- HEADER -->
<div class="p-4 bg-gray-800 flex justify-between items-center border-b border-yellow-400">
  <h2 class="text-xl font-bold text-yellow-400">Inventory Management</h2>

  <button
    onclick="window.location.href='dashboard.html'"
    class="bg-gray-600 px-4 py-1 rounded">
    Back
  </button>
</div>

<!-- MAIN CONTAINER -->
<div class="max-w-6xl mx-auto p-4 space-y-6">

  <!-- ADD PRODUCT -->
  <div class="bg-gray-800 rounded p-4 border border-gray-700">
    <h3 class="font-bold text-lg mb-4 text-yellow-400">Add New Product</h3>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
      <input id="name" placeholder="Product Name" class="p-2 rounded text-black">
      <input id="quantity" type="number" placeholder="Initial Quantity" class="p-2 rounded text-black">
      <input id="price" type="number" placeholder="Price" class="p-2 rounded text-black">
      <input id="image" placeholder="Image URL" class="p-2 rounded text-black">
    </div>

    <textarea id="description" placeholder="Product Description"
      class="w-full p-2 rounded text-black mt-3" rows="2"></textarea>

    <select id="category" class="w-full p-2 rounded text-black mt-3">
      <option value="">Select Category</option>
      <option value="snacks">Snacks</option>
      <option value="beverages">Beverages</option>
      <option value="stationery">Stationery</option>
      <option value="daily">Daily</option>
      <option value="bakery_dairy">Bakery & Dairy</option>
      <option value="chocolates">Chocolates</option>
      <option value="fashion">Fashion</option>
      <option value="personal_care">Personal Care</option>
      <option value="combo">Combo</option>
      <option value="health_hygiene">Health & Hygiene</option>
      <option value="games">Games</option>
      <option value="party_gifts">Party & Gifts</option>
    </select>

    <button onclick="addProduct()"
      class="bg-yellow-400 text-black w-full py-2 rounded font-bold mt-4">
      Add Product
    </button>
  </div>

  <!-- STOCK ACTIONS -->
  <div class="grid md:grid-cols-2 gap-4">

    <div class="bg-gray-800 p-4 rounded border border-gray-700">
      <h3 class="font-bold mb-3 text-yellow-400">Upload Stock Excel</h3>

      <input type="file" id="excelFile"
        accept=".xlsx,.xls,.csv"
        class="w-full p-2 rounded text-black mb-3">

      <button onclick="uploadExcel()"
        class="bg-green-500 text-black w-full py-2 rounded font-bold">
        Upload & Update Stock
      </button>

      <button onclick="undoLastUpload()"
        class="bg-red-600 w-full py-2 rounded font-bold mt-3">
        Undo Last Excel Upload
      </button>
    </div>

    <div class="bg-gray-800 p-4 rounded border border-gray-700 flex flex-col justify-between">
      <h3 class="font-bold text-yellow-400 mb-3">Reports</h3>

      <button onclick="downloadInventory()"
        class="bg-green-500 text-black w-full py-2 rounded font-bold">
        ⬇️ Download Stock Report
      </button>
    </div>

  </div>

  <!-- SEARCH -->
  <div class="bg-gray-800 p-4 rounded border border-gray-700">
    <input
      id="searchInput"
      placeholder="Search product by name..."
      class="w-full p-2 rounded text-black"
      oninput="filterProducts()">
  </div>

  <!-- PRODUCT LIST -->
  <div id="products" class="space-y-3"></div>

</div>

<!-- EDIT MODAL -->
<div id="editModal"
  class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">

  <div class="bg-gray-800 p-6 rounded w-96 border border-yellow-400">
    <h3 class="font-bold mb-3 text-yellow-400">Edit Product</h3>

    <input id="editName" class="w-full p-2 mb-2 rounded text-black">
    <textarea id="editDescription" class="w-full p-2 mb-2 rounded text-black"></textarea>
    <input id="editPrice" type="number" class="w-full p-2 mb-2 rounded text-black">
    <input id="editCategory" class="w-full p-2 mb-2 rounded text-black">
    <input id="editImage" class="w-full p-2 mb-2 rounded text-black">

    <div class="flex justify-between mt-4">
      <button onclick="saveEdit()"
        class="bg-green-500 px-4 py-2 rounded font-bold text-black">
        Save
      </button>
      <button onclick="closeEditModal()"
        class="bg-red-500 px-4 py-2 rounded font-bold">
        Cancel
      </button>
    </div>
  </div>
</div>

<script src="../js/config.js"></script>
<script src="../js/authGuard.js"></script>
<script>checkAuth("owner");</script>
<script src="inventory.js"></script>

</body>
</html>
